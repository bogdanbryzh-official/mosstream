;(() => {
  let t = 5,
    e = 0,
    s = 0
  const n = t => {
      for (let e = t.length - 1; e > 0; e--) {
        const s = Math.floor(Math.random() * (e + 1)),
          n = t[e]
        ;(t[e] = t[s]), (t[s] = n)
      }
      return t
    },
    r = [
      {
        question:
          'Специалисты по работе с данными придумали правило 3-2-1, обеспечивающее соблюдение техник безопасности. Что означают эти цифры?',
        answers: [
          {
            text:
              '3 копии данных, 2 из них на разных носителях информации, 1 - на удаленной площадке',
            correct: !0,
          },
          { text: '3 площадки, 2 разных носителя, 1 копия данных' },
          { text: '3 носителя, 2 копии, 1 площадка' },
          {
            text:
              'Всегда осуществлять обратный отсчет перед запуском новой программы',
          },
        ],
      },
      {
        question:
          'В какой стране в Новый год падает бумажный снег из разрезанных газет?',
        answers: [
          { text: 'Бразилия', correct: !0 },
          { text: 'Греция' },
          { text: 'Чили' },
          { text: 'Сингапур' },
        ],
      },
      {
        question:
          'На какой планете Солнечной системы Новый год можно отмечать в 4 раза чаще, чем на Земле?',
        answers: [
          { text: 'Меркурий', correct: !0 },
          { text: 'Юпитер' },
          { text: 'Уран' },
          { text: 'Марс' },
        ],
      },
      {
        question: 'В какой стране в XVI веке появилась первая елочная игрушка?',
        answers: [
          { text: 'Саксония', correct: !0 },
          { text: 'Австралия' },
          { text: 'Богемия' },
          { text: 'Германия' },
        ],
      },
      {
        question:
          '"Есть ли жизнь на Марсе, нет ли жизни на Марсе - науке пока неизвестно", - говорил персонаж культового фильма "Карнавальная ночь", сыгранный этим актером:',
        answers: [
          { text: 'Сергей Филиппов', correct: !0 },
          { text: 'Игорь Ильинский' },
          { text: 'Андрей Тутышкин' },
          { text: 'Владимир Зельдин' },
        ],
      },
      {
        question:
          'В качестве средств от "большого живота" А.П. Чехов прописывал своим тучным пациентам такую диету:',
        answers: [
          { text: 'Молочную', correct: !0 },
          { text: 'Фруктовую' },
          { text: 'Арбузную' },
          { text: 'Огуречную' },
        ],
      },
      {
        question: 'Какая усадьба изначально называлась Черная грязь?',
        answers: [
          { text: 'Царицыно', correct: !0 },
          { text: 'Коломенское' },
          { text: 'Кусково' },
          { text: 'Архангельское' },
        ],
      },
      {
        question: 'Какой вид транспорта был первым в Москве?',
        answers: [
          { text: 'Трамвай', correct: !0 },
          { text: 'Троллейбус' },
          { text: 'Автобус' },
          { text: 'Метро' },
        ],
      },
      {
        question:
          'Чем угощалась в лесу Марфушка — Инна Чурикова в сказке Александра Роу «Морозко»?',
        answers: [
          { text: 'Луком', correct: !0 },
          { text: 'Яблоками' },
          { text: 'Пельменями' },
          { text: 'Мандаринами' },
        ],
      },
      {
        question:
          'Чем профессор Преображенский рекомендовал закусывать водку в фильме «Собачье сердце»?',
        answers: [
          { text: 'Горячими закусками', correct: !0 },
          { text: 'Дичью' },
          { text: 'Заливной рыбой' },
          { text: 'Солеными огурцами' },
        ],
      },
      {
        question:
          'Какие из перечисленных соревнований включены в программу Олимпийских игр Санта Клаусов и Дедов Морозов?',
        answers: [
          { text: 'Гонки на оленьих упряжках', correct: !0 },
          { text: 'Соревнования в скорости украшения елок' },
          {
            text:
              'Соревнования в мастерстве создания узоров на оконных стеклах',
          },
          { text: 'Соревнования в подъеме гири' },
        ],
      },
      {
        question:
          'Вокруг какого адреса строится сюжет «Иронии судьбы, или С легким паром»?',
        answers: [
          { text: '3-я улица Строителей', correct: !0 },
          { text: '2-я Молодежная улица' },
          { text: '1-я Садовая улица' },
          { text: 'Проспект Ленина' },
        ],
      },
      {
        question:
          'В 2018-м вышел новый «Гринч». А когда эта сказка была экранизирована впервые?',
        answers: [
          { text: 'В 1966-м', correct: !0 },
          { text: 'В 1976-м' },
          { text: 'В 1986-м' },
          { text: 'В 1996-м' },
        ],
      },
      {
        question:
          'Знаменитый «Кошмар перед Рождеством» Генри Селика и Тима Бёртона основан на:',
        answers: [
          { text: 'Поэме Бёртона', correct: !0 },
          { text: 'Рассказе Селика' },
          { text: 'Повести Чарльза Диккенса' },
          { text: 'Пьесе автора «Гринча» Доктора Сюсса' },
        ],
      },
      {
        question:
          'Готэм-Сити, возможно, самое мрачное место за всю историю кино для встречи Рождества. Но в каком из фильмов о Бэтмене действие происходит на Рождество?',
        answers: [
          { text: '«Бэтмен возвращается»', correct: !0 },
          { text: '«Бэтмен»' },
          { text: '«Бэтмен навсегда»' },
          { text: '«Бэтмен и Робин»' },
        ],
      },
      {
        question:
          'В новогоднем выпуске «Ну, погоди!» в песне «Расскажи, Снегурочка» аккомпанирует очень странный джазовый оркестр. Из кого он состоит?',
        answers: [
          { text: 'Из обезьян', correct: !0 },
          { text: 'Из барсуков' },
          { text: 'Из бобров' },
          { text: 'Из медведей' },
        ],
      },
      {
        question: 'Компьютерную мышь придумал Дуглас Энгельбарт в:',
        answers: [
          { text: '1964', correct: !0 },
          { text: '1955' },
          { text: '1984' },
          { text: '1996' },
        ],
      },
      {
        question:
          'Компания Nokia была основана в 1865 году и долгое время занималась производством:',
        answers: [
          { text: 'Бумаги', correct: !0 },
          { text: 'Проводов' },
          { text: 'Вилок' },
          { text: 'Ткани' },
        ],
      },
      {
        question:
          '«Аккуратный программист — быстрый программист». Кто это сказал?',
        answers: [
          { text: 'Билл Гейтс', correct: !0 },
          { text: 'Марк Цукерберг' },
          { text: 'Павел Дуров' },
          { text: 'Александр Грина' },
        ],
      },
      {
        question:
          'Как называется шифр, в котором каждый символ текста заменяется символом, находящемся на некотором постоянном числе позиций левее или правее в алфавите?',
        answers: [
          { text: 'Шифр Цезаря', correct: !0 },
          { text: 'Мудрая лотерея' },
          { text: 'Тарабарщина' },
          { text: 'Энигма' },
        ],
      },
    ]
  let o = n(r)
  const a = document.getElementById('go-quiz'),
    c = document.getElementsByClassName('quiz-backdrop')[0],
    i = document.getElementById('quiz-container')
  i.innerHTML =
    '<button id="close-quiz"></button><div id="quiz" class="quiz"></div>'
  const x = document.getElementById('quiz'),
    d = document.createElement('button')
  ;(d.textContent = 'Следующий вопрос'),
    (d.disabled = !0),
    d.classList.add('next')
  const l = n => {
      ;(answer = n.target),
        answer.classList.add('choosen'),
        answer.parentNode.childNodes.forEach(t => {
          'LABEL' === t.tagName && t.removeEventListener('click', l)
        }),
        setTimeout(() => {
          i.classList.remove('quiz-default-theme'),
            (d.disabled = !1),
            'true' === answer.dataset.correct
              ? (i.classList.add('quiz-success-theme'),
                (answer.textContent = '🔥 ' + answer.textContent + ' 🔥'),
                answer.classList.remove('choosen'),
                answer.classList.add('correct'),
                e++)
              : (i.classList.add('quiz-fail-theme'),
                answer.classList.remove('choosen'),
                answer.classList.add('wrong'),
                s++),
            1 === t
              ? ((d.textContent = 'Завершить'), (d.dataset.end = !0))
              : ((d.textContent = 'Следующий вопрос'), (d.dataset.end = !1))
        }, 500)
    },
    u = t => {
      const e = document.createElement('h4')
      e.classList.add('question'),
        (e.textContent = t.question),
        x.appendChild(e),
        n(t.answers).forEach(t => {
          ;(t => {
            const e = document.createElement('label')
            e.classList.add('variant'),
              (e.textContent = t.text),
              (e.dataset.correct = t.correct),
              e.addEventListener('click', l),
              x.appendChild(e)
          })(t)
        })
    },
    m = () => {
      document.getElementById('close-quiz').addEventListener('click', () => {
        c.classList.add('hidden')
      }),
        t--,
        i.classList.remove('quiz-success-theme'),
        i.classList.remove('quiz-fail-theme'),
        i.classList.add('quiz-default-theme'),
        'true' === d.dataset.end
          ? (() => {
              let n
              5 === e
                ? (n = 'Поздравляем! 🥳')
                : e > s
                ? (n = 'Неплохо 😉')
                : s > e
                ? (n = 'Бывает 🤷🏻')
                : 5 === s && (n = 'Может еще раз? 😌'),
                (x.innerHTML = `\n      <h3>${n}</h3>\n      <p>Правильных ответов ${e}</p>\n      <p>Неправильных ответов ${s}</p>\n      <button id="try-again">Попробовать еще</button>\n    `),
                (d.dataset.end = 'false'),
                document
                  .getElementById('try-again')
                  .addEventListener('click', () => {
                    m(), (t = 5), (e = 0), (s = 0)
                  })
            })()
          : ((x.innerHTML = '<h3>Дайте ответ на вопрос:</h3>'),
            u(
              (() => {
                const t = Math.floor(Math.random() * o.length)
                console.log(o.length)
                console.log(t)
                return o.pop(t)
              })()
            ),
            c.classList.remove('hidden'),
            (d.disabled = !0),
            x.appendChild(d))
    }
  a.addEventListener('click', () => {
    ;(t = 5), (e = 0), (s = 0), (o = n(r)), m()
  }),
    d.addEventListener('click', () => {
      n.length < 10 && (o = n(r)), m()
    })
})()
